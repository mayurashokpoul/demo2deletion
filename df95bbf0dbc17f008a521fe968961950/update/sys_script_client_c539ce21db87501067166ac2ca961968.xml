<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script_client">
    <sys_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_extended>false</applies_extended>
        <condition/>
        <description/>
        <field>return_to</field>
        <global>true</global>
        <isolate_script>true</isolate_script>
        <messages/>
        <name>On change of returnto-fields read only</name>
        <order/>
        <script><![CDATA[function makeReturnAddressDetailsReadonly(flag) {
    g_form.setMandatory('return_address', !flag);
    g_form.setReadOnly('return_address', flag);
    g_form.setReadOnly('return_address2', flag);
    g_form.setReadOnly('return_address3', flag);
    g_form.setMandatory('return_city', !flag);
    g_form.setReadOnly('return_city', flag);
    g_form.setReadOnly('return_country', flag);
    g_form.setReadOnly('return_state', flag);
    g_form.setMandatory('return_postal_code', !flag);
    g_form.setReadOnly('return_postal_code', flag);
}

function makeReturnContactDetailsReadonly(flag) {
    g_form.setMandatory('return_contact', !flag);
    g_form.setReadOnly('return_contact', flag);
    g_form.setMandatory('return_contact_email', !flag);
    g_form.setReadOnly('return_contact_email', flag);
    g_form.setMandatory('return_contact_phone', !flag);
    g_form.setReadOnly('return_contact_phone', flag);
}

function clearShippingLocationValues() {
    g_form.setValue('shipping_location', '');
    g_form.setValue('shipping_address', '');
    g_form.setValue('shipping_address2', '');
    g_form.setValue('shipping_address3', '');
    g_form.setValue('shipping_city', '');
    g_form.setValue('shipping_state', '');
    g_form.setValue('shipping_postal_code', '');
    g_form.setValue('shipping_country', '');
}

function clearReturnLocationValues() {
    g_form.setValue('return_location', '');
    g_form.setValue('return_address', '');
    g_form.setValue('return_address2', '');
    g_form.setValue('return_address3', '');
    g_form.setValue('return_city', '');
    g_form.setValue('return_state', '');
    g_form.setValue('return_postal_code', '');
    g_form.setValue('return_country', '');
}


function onChange(control, oldValue, newValue, isLoading, isTemplate) {

    if ((isLoading && g_form.isNewRecord()) || newValue === '') {
        //         if (newValue === '') {
        //             g_form.setValue('return_location', '');
        //             g_form.setDisplay('return_location', false);
        //             g_form.setValue('shipping_location', '');
        //         }
        return;
    }

    if (oldValue != newValue) {
        clearShippingLocationValues();
        clearReturnLocationValues();
    }

    var returnFlags = new GlideAjax('BoxLabelUtils');
    returnFlags.addParam('sysparm_name', 'getReturnFlags');
    returnFlags.addParam('sysparm_returnTo', newValue);
    returnFlags.getXML(getReturnValues);

    function getReturnValues(response) {
        var answer = response.responseXML.documentElement.getAttribute("answer");
        var array = JSON.parse(answer);

        //  alert(answer);
        var disableReturnAdress = array.disableReturnAddresDetials;
        var disableReturnContact = array.disableReturnContactDetails;
        var ReturntoSourceLocation = array.ReturntoSourceLocation;
        var ShiptoSourceLocation = array.ShiptoSourceLocation;
        var returnAddressFlag = array.returnAddressFlag;

        // alert('disableReturnAdress:'+disableReturnAdress);
        // 		alert('disableReturnContact:'+disableReturnContact);
        if (disableReturnAdress == 1) {
            makeReturnAddressDetailsReadonly(true);

        } else {
            makeReturnAddressDetailsReadonly(false);
        }
        if (disableReturnContact == 1) {
            makeReturnContactDetailsReadonly(true);
        } else {
            makeReturnContactDetailsReadonly(false);
        }


        if (ReturntoSourceLocation == 1) {
            g_form.setDisplay('return_location', true);
        } else {
            g_form.setDisplay('return_location', false);
        }

        if (ShiptoSourceLocation == 1) {
            g_form.setDisplay('shipping_location', true);
        } else {
            g_form.setDisplay('shipping_location', false);
        }


        if (returnAddressFlag.toString() == 'true' && !isLoading) {
            g_form.setValue('return_address', array.returnToAddress1);
            g_form.setValue('return_address2', array.returnToAddress2);
            g_form.setValue('return_address3', array.returnToAddress3);
            g_form.setValue('return_city', array.returnToCity);
            g_form.setValue('return_state', array.returnToState);
            g_form.setValue('return_postal_code', array.returnToPotalCode);
            g_form.setValue('return_country', array.returnToCountry);
            g_form.setValue('return_contact', array.returnToContact);
            g_form.setValue('return_contact_email', array.returnToContactEmail);
            g_form.setValue('return_contact_phone', array.returnToContactPhone);


        }


    }


    //Type appropriate comment here, and begin script below

}]]></script>
        <sys_class_name>sys_script_client</sys_class_name>
        <sys_created_by>INVOLR00</sys_created_by>
        <sys_created_on>2020-09-04 12:09:39</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>c539ce21db87501067166ac2ca961968</sys_id>
        <sys_mod_count>45</sys_mod_count>
        <sys_name>On change of returnto-fields read only</sys_name>
        <sys_overrides/>
        <sys_package display_value="Ingram Micro IT Asset Disposition" source="x_inmis_im_itad">df95bbf0dbc17f008a521fe968961950</sys_package>
        <sys_policy/>
        <sys_scope display_value="Ingram Micro IT Asset Disposition">df95bbf0dbc17f008a521fe968961950</sys_scope>
        <sys_update_name>sys_script_client_c539ce21db87501067166ac2ca961968</sys_update_name>
        <sys_updated_by>Ruthvic.voladri@ness.com</sys_updated_by>
        <sys_updated_on>2021-02-12 07:45:25</sys_updated_on>
        <table>x_inmis_im_itad_box_label_order</table>
        <type>onChange</type>
        <ui_type>0</ui_type>
        <view/>
    </sys_script_client>
</record_update>
